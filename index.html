<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Themes & Motifs - The Philippines' most prestigious wedding resource. Find vendors, read reviews, and book suppliers."
    />
    <title>Themes & Motifs | The Wedding Marketplace</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=Lato:wght@300;400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      /* --- CORE VARIABLES & RESET --- */
      :root {
        --bg-cream: #fcfbf9;
        --text-dark: #2c2c2c;
        --brand-brown: #a67c52;
        --brand-green: #7a8b6e;
        --brand-terra: #c17a4e;
        --white: #ffffff;
        --light-gray: #eaeaea;
        --booking-blue: #003580;
        --shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      body {
        background: radial-gradient(circle at 20% 20%, #fff7ed, #fcfbf9 40%, #f6f1ea 85%);
        font-family: "Lato", sans-serif;
        color: var(--text-dark);
        line-height: 1.6;
      }
      h1,
      h2,
      h3,
      h4,
      .serif {
        font-family: "Playfair Display", serif;
      }

      .hidden {
        display: none !important;
      }
      .register-wrapper {
        max-width: 100%;
        margin: 20px 0 10px;
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }
      button {
        cursor: pointer;
        transition: 0.3s;
      }

      /* --- HEADER --- */
      header {
        background: var(--white);
        border-bottom: 1px solid var(--light-gray);
        padding: 15px 0;
        position: sticky;
        top: 0;
        z-index: 1000;
      }
      .nav-flex {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .logo {
        font-family: "Playfair Display", serif;
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--text-dark);
        letter-spacing: 1px;
        cursor: pointer;
      }
      .nav-links {
        display: flex;
        gap: 20px;
        align-items: center;
      }
      .nav-item {
        font-size: 0.9rem;
        font-weight: 600;
        color: #555;
        text-decoration: none;
        cursor: pointer;
      }
      .nav-item:hover {
        color: var(--brand-brown);
      }
      .btn-auth {
        padding: 8px 20px;
        border: 1px solid var(--brand-brown);
        color: var(--brand-brown);
        background: transparent;
        border-radius: 4px;
      }
      .btn-auth:hover {
        background: var(--brand-brown);
        color: white;
      }

      /* --- ICONS --- */
      .cat-icon {
        width: 32px;
        height: 32px;
        stroke: var(--brand-brown);
        stroke-width: 2;
        fill: none;
        stroke-linecap: round;
        stroke-linejoin: round;
        margin-bottom: 15px;
        transition: 0.3s;
      }

      /* --- HOME VIEW --- */
      .hero {
        display: flex;
        align-items: center;
        gap: 40px;
        padding: 60px 0;
      }
      .hero-text h1 {
        font-size: 3rem;
        line-height: 1.1;
        margin-bottom: 20px;
      }
      .hero-actions {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-top: 18px;
        flex-wrap: wrap;
      }
      .hero-img {
        flex: 1;
        height: 400px;
        background: url("https://images.unsplash.com/photo-1519741497674-611481863552?w=800&q=80")
          center/cover;
        border-radius: 200px 200px 0 0;
      }

      .search-container {
        background: white;
        padding: 20px;
        box-shadow: var(--shadow);
        border-radius: 8px;
        margin-top: -30px;
        position: relative;
        z-index: 10;
        border: 1px solid #eee;
        scroll-margin-top: 90px;
      }
      .search-container.highlight-pulse {
        animation: searchPulse 1.2s ease-in-out 0s 2;
        box-shadow: 0 12px 36px rgba(193, 122, 78, 0.25),
          0 0 0 3px rgba(193, 122, 78, 0.15);
        border-color: var(--brand-terra);
      }
      .search-container.highlight-pulse .form-input,
      .search-container.highlight-pulse .form-select {
        border-color: var(--brand-terra);
        box-shadow: 0 0 0 3px rgba(193, 122, 78, 0.18);
      }

      @keyframes searchPulse {
        0% {
          box-shadow: var(--shadow);
        }
        50% {
          box-shadow: 0 18px 40px rgba(193, 122, 78, 0.3),
            0 0 0 5px rgba(193, 122, 78, 0.2);
        }
        100% {
          box-shadow: var(--shadow);
        }
      }

      /* Modified search grid columns since sort was removed */
      .search-grid {
        display: grid;
        grid-template-columns: 2fr 1fr auto;
        gap: 10px;
      }
      .form-input,
      .form-select {
        width: 100%;
        padding: 12px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-family: inherit;
      }
      .btn-primary {
        background: var(--brand-brown);
        color: white;
        border: none;
        padding: 12px 30px;
        border-radius: 4px;
        font-weight: bold;
      }
      .btn-primary:hover {
        background: #8e6a46;
      }
      .btn-secondary {
        background: transparent;
        color: var(--brand-brown);
        border: 1px solid var(--brand-brown);
        padding: 11px 22px;
        border-radius: 6px;
        font-weight: 700;
      }
      .btn-secondary:hover {
        background: #f8f1e8;
      }

      .category-grid {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin: 40px 0;
        flex-wrap: wrap;
      }
      .cat-card {
        width: 120px;
        height: 120px;
        background: white;
        border: 1px solid #eee;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: 0.2s;
        position: relative;
        border-radius: 8px;
      }
      .cat-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow);
        border-color: var(--brand-brown);
      }
      .cat-card:hover .cat-icon {
        transform: scale(1.1);
        stroke: var(--brand-terra);
      }
      .cat-card.selected {
        border-color: var(--brand-terra);
        box-shadow: 0 8px 26px rgba(193, 122, 78, 0.15);
        transform: translateY(-6px) scale(1.02);
      }

      /* Grid Toolbar */
      .grid-toolbar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }
      .sort-wrapper {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .vendor-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 25px;
        margin-bottom: 60px;
      }
      .v-card {
        background: white;
        border: 1px solid #eee;
        border-radius: 8px;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        transition: 0.3s;
      }
      .v-card:hover {
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        transform: translateY(-2px);
      }
      .v-img {
        height: 180px;
        background: #ddd;
        background-size: cover;
        background-position: center;
      }
      .v-body {
        padding: 20px;
        flex: 1;
        display: flex;
        flex-direction: column;
      }
      .v-score {
        position: absolute;
        top: 10px;
        right: 10px;
        background: var(--brand-green);
        color: white;
        padding: 5px 10px;
        border-radius: 4px;
        font-weight: bold;
      }

      /* --- DETAIL VIEW --- */
      .detail-header {
        margin: 20px 0;
      }
      .detail-gallery {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 10px;
        height: 400px;
        margin-bottom: 30px;
      }
      .gal-main {
        background: #ccc;
        background-size: cover;
        border-radius: 8px 0 0 8px;
      }
      .gal-sub {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
      .gal-item {
        flex: 1;
        background: #ddd;
        background-size: cover;
        border-radius: 0 8px 8px 0;
      }

      .detail-layout {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 40px;
      }
      .booking-card {
        background: white;
        padding: 25px;
        border: 1px solid #ddd;
        border-radius: 8px;
        position: sticky;
        top: 100px;
        box-shadow: var(--shadow);
      }
      .review-box {
        background: white;
        padding: 25px;
        border-radius: 8px;
        border: 1px solid #eee;
        margin-top: 30px;
      }
      .r-item {
        border-bottom: 1px solid #eee;
        padding: 20px 0;
      }
      /* Redesigned Review List */
      .r-item-flex {
        display: flex;
        align-items: flex-start;
        gap: 15px;
      }
      .r-avatar-circle {
        width: 45px;
        height: 45px;
        background-color: #f0ebe5;
        color: var(--brand-brown);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-size: 1.2rem;
        flex-shrink: 0;
      }
      .r-content {
        flex: 1;
      }
      .r-user-name {
        font-weight: bold;
        color: var(--text-dark);
        display: block;
      }
      .r-stars {
        color: #ffc107;
        font-size: 0.8rem;
        margin-top: 2px;
      }
      .r-text {
        margin-top: 8px;
        color: #555;
        font-size: 0.95rem;
      }
      .r-date {
        color: #999;
        font-size: 0.8rem;
        margin-top: 5px;
        display: block;
      }
      .r-numeric-score {
        display: flex;
        align-items: center;
        gap: 4px;
        color: var(--brand-green);
        font-weight: bold;
        font-size: 1rem;
        margin-left: auto;
      }

      /* --- FAIRS VIEW FIX --- */
      .fair-date-badge {
        display: inline-block;
        background: var(--brand-brown);
        color: white;
        padding: 4px 10px;
        border-radius: 4px;
        font-size: 0.8rem;
        margin-bottom: 10px;
        font-weight: bold;
      }

      /* --- AUTH & ADMIN --- */
      .auth-container {
        max-width: 400px;
        width: 100%;
        background: white;
        padding: 36px;
        border-radius: 14px;
        box-shadow: 0 16px 50px rgba(0, 0, 0, 0.08);
        text-align: left;
        border: 1px solid #f0ebe4;
      }
      .admin-table {
        width: 100%;
        border-collapse: collapse;
        background: white;
        margin-top: 20px;
      }
      .admin-table th,
      .admin-table td {
        padding: 15px;
        border: 1px solid #eee;
        text-align: left;
      }
      .admin-table th {
        background: #f9f9f9;
      }
      .action-btn {
        padding: 5px 10px;
        font-size: 0.8rem;
        margin-right: 5px;
        border-radius: 4px;
        border: none;
      }
      .btn-del {
        background: #ffebee;
        color: #c62828;
      }
      .btn-edit {
        background: #e3f2fd;
        color: #1565c0;
      }

      /* --- AUTH / REGISTER LAYOUT --- */
      .auth-shell {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 24px;
        margin: 40px auto 30px;
        align-items: start;
      }
      .auth-side {
        background: white;
        border: 1px solid #eee4da;
        border-radius: 14px;
        padding: 26px;
        box-shadow: 0 12px 36px rgba(0, 0, 0, 0.05);
      }
      .register-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 18px;
        margin: 16px 0 12px;
      }
      .reg-card {
        background: #fffaf5;
        border: 1px solid #f0e5d9;
        border-radius: 12px;
        padding: 14px 14px 18px;
        display: grid;
        gap: 10px;
        box-shadow: 0 10px 28px rgba(0, 0, 0, 0.05);
      }
      .reg-card h4 {
        margin: 0;
      }
      .reg-card .muted {
        color: #777;
      }
      .benefit-list {
        margin: 12px 0 18px;
        padding-left: 18px;
        color: #555;
        line-height: 1.5;
      }
      .pill {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        background: #f3ede6;
        color: var(--brand-brown);
        padding: 4px 10px;
        border-radius: 999px;
        font-weight: 700;
        font-size: 0.8rem;
        letter-spacing: 0.02em;
      }
      .badge-premium {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        background: #fff2e8;
        color: #c17a4e;
        padding: 4px 10px;
        border-radius: 999px;
        font-weight: 700;
        font-size: 0.78rem;
        width: fit-content;
      }
      .section-intro {
        margin: 24px 0 12px;
        display: flex;
        flex-direction: column;
        gap: 6px;
      }
      .form-label {
        font-weight: 700;
        font-size: 0.85rem;
        color: #3a342f;
        margin-bottom: 4px;
      }
      .form-input,
      .form-select,
      textarea.form-input {
        transition: border-color 0.2s, box-shadow 0.2s;
      }
      .form-input:focus,
      .form-select:focus,
      textarea.form-input:focus {
        outline: none;
        border-color: var(--brand-brown);
        box-shadow: 0 0 0 3px rgba(166, 124, 82, 0.15);
      }
      .file-input {
        width: 100%;
        padding: 10px;
        border: 1px solid #e6d7c7;
        border-radius: 8px;
        background: #fffaf5;
        font-family: inherit;
        color: #3a342f;
      }
      .file-input::file-selector-button {
        background: var(--brand-brown);
        color: white;
        border: none;
        padding: 9px 14px;
        margin-right: 10px;
        border-radius: 8px;
        font-weight: 700;
        cursor: pointer;
      }
      .file-input:hover::file-selector-button {
        background: #8e6a46;
      }
      .reg-card .reg-card {
        margin-top: 8px;
        background: #fff;
        border: 1px dashed #e6d7c7;
        box-shadow: none;
        border-radius: 10px;
      }
      .reg-card .reg-card strong {
        display: block;
        margin-bottom: 4px;
      }
      .service-options {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-top: 4px;
      }
      .check-pill {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 8px 10px;
        border: 1px solid #e6d7c7;
        border-radius: 10px;
        background: #fff;
        font-size: 0.9rem;
        color: #3a342f;
      }
      .check-pill input {
        accent-color: var(--brand-brown);
      }
      .service-other {
        display: grid;
        gap: 6px;
        margin-top: 6px;
      }
      .span-2 {
        grid-column: span 2;
      }

      /* --- PRICING MODAL --- */
      #pricing-modal {
        display: none;
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.45);
        align-items: center;
        justify-content: center;
        padding: 18px;
        z-index: 2000;
      }
      .pricing-content {
        background: white;
        width: min(960px, 100%);
        padding: 28px;
        border-radius: 16px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
        position: relative;
      }
      .close-modal {
        position: absolute;
        right: 14px;
        top: 10px;
        border: none;
        background: transparent;
        font-size: 1.4rem;
        cursor: pointer;
        color: #666;
      }
      .pricing-head {
        text-align: center;
        margin-bottom: 22px;
      }
      .pricing-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 16px;
      }
      .plan-card {
        border: 1px solid #eee4da;
        border-radius: 12px;
        padding: 18px;
        background: #fffdf9;
        box-shadow: 0 12px 32px rgba(0, 0, 0, 0.05);
        display: grid;
        gap: 10px;
      }
      .plan-card.featured {
        border-color: var(--brand-brown);
        box-shadow: 0 16px 46px rgba(166, 124, 82, 0.16);
      }
      .plan-meta {
        text-transform: uppercase;
        letter-spacing: 0.04em;
        font-size: 0.75rem;
        color: #8b6a45;
        font-weight: 700;
      }
      .plan-price {
        font-size: 1.6rem;
        font-weight: 700;
        color: var(--brand-brown);
      }
      .plan-features {
        list-style: disc;
        margin: 0 0 0 18px;
        padding: 0;
        color: #555;
        display: grid;
        gap: 6px;
      }

      /* Mobile */
      @media (max-width: 768px) {
        .hero,
        .detail-layout,
        .search-grid,
        .detail-gallery {
          grid-template-columns: 1fr;
          display: flex;
          flex-direction: column;
        }
        .hero-img {
          width: 100%;
          height: 250px;
        }
        .nav-links {
          display: flex;
          flex-direction: column;
          gap: 10px;
          background: white;
          padding: 12px 0 0;
        }
        .search-grid {
          display: flex;
          flex-direction: column;
        }
        .grid-toolbar {
          flex-direction: column;
          align-items: flex-start;
          gap: 10px;
        }
        .sort-wrapper {
          width: 100%;
          justify-content: space-between;
        }
        .auth-shell {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <div class="container nav-flex">
        <div class="logo" onclick="app.navigate('home')">
          <img
            src="https://themesnmotifs.com/wp-content/uploads/elementor/thumbs/T_M-Logo-1-qzxx62xvcaywvxz23bwwe4nm1tu4exw9i42ghzw8g6.png"
            alt="Themes & Motifs"
            style="height: 36px"
            onerror="this.src='https://via.placeholder.com/150x50?text=Themes+Motifs'"
          />
        </div>
        <nav class="nav-links">
          <a
            class="nav-item"
            id="nav-admin"
            style="display: none"
            onclick="app.navigate('admin')"
            >Admin Dashboard</a
          >
          <div id="auth-section">
            <button class="btn-auth" onclick="app.navigate('login')">
              Sign In
            </button>
          </div>
        </nav>
      </div>
    </header>

    <!-- HOME VIEW -->
    <div id="view-home" class="container">
      <section class="hero">
        <div class="hero-text">
          <h1 class="serif">
            Plan your perfect day.<br /><span
              style="color: var(--brand-brown); font-style: italic"
              >Find the best suppliers.</span
            >
          </h1>
          <p>Search over 1,000 verified wedding vendors with real reviews.</p>
          <div class="hero-actions">
            <button class="btn-primary" onclick="app.scrollToSearch()">
              Start searching
            </button>
            <button class="btn-secondary" onclick="app.navigate('register')">
              Become a vendor
            </button>
          </div>
        </div>
        <div class="hero-img"></div>
      </section>

      <div class="search-container">
        <!-- Removed sort from here -->
        <div class="search-grid">
          <input
            type="text"
            class="form-input"
            id="search-text"
            placeholder="Search Vendor Name (e.g. Nice Print)"
          />
          <select class="form-select" id="search-type">
            <option value="">All Categories</option>
            <option value="Venue">Venue</option>
            <option value="Photography">Photography</option>
            <option value="Catering">Catering</option>
            <option value="Stylist">Stylist</option>
            <option value="Attire">Attire</option>
          </select>
          <button class="btn-primary" onclick="app.handleSearch(true)">
            Search
          </button>
        </div>
      </div>

      <div class="category-grid">
        <div
          class="cat-card"
          data-cat="Venue"
          onclick="app.filterByCat('Venue')"
        >
          <!-- New Home/Building Icon -->
          <svg
            class="cat-icon"
            viewBox="0 0 24 24"
            stroke="currentColor"
            fill="none"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
            <polyline points="9 22 9 12 15 12 15 22"></polyline>
          </svg>
          <small>Venues</small>
        </div>

        <div
          class="cat-card"
          data-cat="Photography"
          onclick="app.filterByCat('Photography')"
        >
          <!-- New Camera Icon -->
          <svg
            class="cat-icon"
            viewBox="0 0 24 24"
            stroke="currentColor"
            fill="none"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path
              d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"
            ></path>
            <circle cx="12" cy="13" r="4"></circle>
          </svg>
          <small>Photo</small>
        </div>

        <div
          class="cat-card"
          data-cat="Catering"
          onclick="app.filterByCat('Catering')"
        >
          <!-- New Cutlery Icon -->
          <svg
            class="cat-icon"
            viewBox="0 0 24 24"
            stroke="currentColor"
            fill="none"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"></path>
            <path d="M7 2v20"></path>
            <path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"></path>
          </svg>
          <small>Catering</small>
        </div>

        <div
          class="cat-card"
          data-cat="Stylist"
          onclick="app.filterByCat('Stylist')"
        >
          <!-- New Wand/Sparkles Icon -->
          <svg
            class="cat-icon"
            viewBox="0 0 24 24"
            stroke="currentColor"
            fill="none"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M15 4V2"></path>
            <path d="M15 16v-2"></path>
            <path d="M8 9h2"></path>
            <path d="M20 9h2"></path>
            <path d="M17.8 11.8L19 13"></path>
            <path d="M15 9h0"></path>
            <path d="M17.8 6.2L19 5"></path>
            <path d="M3 21l9-9"></path>
            <path d="M12.2 6.2L11 5"></path>
          </svg>
          <small>Styling</small>
        </div>

        <div
          class="cat-card"
          data-cat="Attire"
          onclick="app.filterByCat('Attire')"
        >
          <!-- New Hanger Icon -->
          <svg
            class="cat-icon"
            viewBox="0 0 24 24"
            stroke="currentColor"
            fill="none"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M12 3a5 5 0 0 0-5 5v1h10V8a5 5 0 0 0-5-5z"></path>
            <path d="M3 14l3-3h12l3 3v8H3v-8z"></path>
          </svg>
          <small>Attire</small>
        </div>
      </div>

      <!-- New Sort and Count Toolbar above Vendor Grid -->
      <div class="grid-toolbar">
        <h2 class="serif" style="margin: 0">
          Featured Vendors
          <span
            id="vendor-count"
            style="
              font-size: 0.9rem;
              color: #888;
              font-family: 'Lato', sans-serif;
              font-weight: normal;
            "
          ></span>
        </h2>
        <div class="sort-wrapper">
          <label for="search-sort" style="font-size: 0.9rem; color: #666"
            >Sort by:</label
          >
          <select
            class="form-select"
            id="search-sort"
            style="width: auto; padding: 8px"
            onchange="app.handleSearch()"
          >
            <option value="rating">Top Rated</option>
            <option value="price_low">Price: Low to High</option>
            <option value="price_high">Price: High to Low</option>
          </select>
        </div>
      </div>

      <div class="vendor-grid" id="vendor-list-container"></div>
    </div>

    <!-- DETAIL VIEW -->
    <div id="view-detail" class="container hidden" style="padding-top: 40px">
      <button
        onclick="app.navigate('home')"
        style="
          background: none;
          border: none;
          text-decoration: underline;
          color: #666;
          margin-bottom: 10px;
        "
      >
        &larr; Back to Search
      </button>

      <div id="detail-content"></div>
    </div>

    <!-- BRIDAL FAIRS VIEW -->
    <div id="view-fairs" class="container hidden" style="padding-top: 40px">
      <h1 class="serif" style="margin-bottom: 10px">Upcoming Bridal Fairs</h1>
      <p style="color: #666; margin-bottom: 30px">
        Pre-register for the biggest wedding expos in the Philippines. Get free
        admission and exclusive deals.
      </p>
      <div id="fairs-list-container" class="vendor-grid">
        <!-- Fairs populated by JS -->
      </div>
    </div>

    <!-- LOGIN & REGISTRATION VIEW -->
    <div id="view-login" class="container hidden">
      <div class="auth-container" style="margin: 40px auto">
        <h2 class="serif">Welcome Back</h2>
        <p style="margin-bottom: 18px; color: #666">
          Sign in to save vendors, leave reviews, and manage deals.
        </p>
        <label class="form-label" for="login-email">Email</label>
        <input
          type="email"
          id="login-email"
          class="form-input"
          placeholder="Email Address"
          style="margin-bottom: 10px"
        />
        <label class="form-label" for="login-pass">Password</label>
        <input
          type="password"
          id="login-pass"
          class="form-input"
          placeholder="Password"
          style="margin-bottom: 16px"
        />
        <button class="btn-primary" style="width: 100%" onclick="app.login()">
          Sign In
        </button>
        <p style="margin-top: 14px; font-size: 0.8rem; color: #666">
          Try <strong>admin@themes.com</strong> for Admin Access.
        </p>
        <p style="margin-top: 14px; font-size: 0.85rem; color: #555">
          Are you a vendor? <a style="color: var(--brand-brown); cursor: pointer;" onclick="app.navigate('register')">Register here</a>.
        </p>
      </div>
    </div>

    <!-- REGISTRATION VIEW -->
    <div id="view-register" class="container hidden">
      <div class="auth-shell" style="grid-template-columns: 1fr">
        <div class="auth-side">
          <div class="pill">Vendor onboarding</div>
          <div class="section-intro">
            <h2 class="serif" style="margin: 0">Register your business</h2>
            <p class="muted">
              Complete the essentials to appear on Themes & Motifs and request a
              Verified Badge.
            </p>
          </div>

          <div class="register-grid">
            <div class="reg-card span-2">
              <h4 class="serif">Business Details</h4>
              <p class="muted">General business information.</p>
              <input
                id="reg-business-name"
                class="form-input"
                placeholder="Business Name *"
              />
              <input
                id="reg-business-email"
                class="form-input"
                placeholder="Business Email *"
                type="email"
              />
              <input
                id="reg-business-phone"
                class="form-input"
                placeholder="Contact Number"
              />
              <div>
                <label class="form-label">Type of Services *</label>
                <div class="service-options">
                  <label class="check-pill"
                    ><input type="checkbox" value="Venue" /> Venue</label
                  >
                  <label class="check-pill"
                    ><input type="checkbox" value="Photography" /> Photography</label
                  >
                  <label class="check-pill"
                    ><input type="checkbox" value="Catering" /> Catering</label
                  >
                  <label class="check-pill"
                    ><input type="checkbox" value="Stylist" /> Stylist</label
                  >
                  <label class="check-pill"
                    ><input type="checkbox" value="Attire" /> Attire</label
                  >
                  <label class="check-pill"
                    ><input type="checkbox" value="Other" /> Other</label
                  >
                </div>
                <div class="service-other">
                  <label class="form-label" for="reg-service-other"
                    >If Other, please specify</label
                  >
                  <input
                    id="reg-service-other"
                    class="form-input"
                    placeholder="Describe other services"
                  />
                </div>
              </div>
            </div>

            <div class="reg-card">
              <h4 class="serif">Rates</h4>
              <p class="muted">Starting rate or package price.</p>
              <input
                id="reg-rate"
                class="form-input"
                type="number"
                min="0"
                placeholder="Starting Rate (₱) *"
              />
              <textarea
                id="reg-faqs"
                class="form-input"
                rows="3"
                placeholder="FAQs (cancellation, coverage, inclusions) *"
              ></textarea>
            </div>

            <div class="reg-card">
              <h4 class="serif">Map & Album</h4>
              <p class="muted">
                Share a Google Maps embed link or full address, plus sample work.
              </p>
              <input
                id="reg-map"
                class="form-input"
                placeholder="Map link or address *"
              />
              <div class="reg-card" style="padding: 10px; background: #fafafa">
                <strong>Album</strong>
                <p class="muted">Upload sample photos of your work.</p>
                <input
                  id="reg-album"
                  class="file-input"
                  type="file"
                  accept="image/*"
                  multiple
                />
              </div>
            </div>

            <div class="reg-card">
              <h4 class="serif">Marketplace</h4>
              <p class="muted">
                Deals posting (Premium accounts). Describe your promo.
              </p>
              <textarea
                id="reg-marketplace"
                class="form-input"
                rows="4"
                placeholder="Deal headline, validity dates, inclusions"
              ></textarea>
              <div class="badge-premium">Premium Feature</div>
              <textarea
                id="reg-premium-entries"
                class="form-input"
                rows="3"
                placeholder="Premium Directory Entries (admin field)"
              ></textarea>
            </div>

            <div class="reg-card">
              <h4 class="serif">Verification Documents</h4>
              <p class="muted">Upload to request a Verified Badge.</p>
              <label class="muted">Business Permit *</label>
              <input id="reg-permit" class="file-input" type="file" />
              <label class="muted">DTI Registration *</label>
              <input id="reg-dti" class="file-input" type="file" />
              <label class="muted">SEC Registration *</label>
              <input id="reg-sec" class="file-input" type="file" />
            </div>
          </div>

          <div class="reg-actions">
            <button class="btn-secondary" onclick="app.openPricingModal()">
              View Plan Pricing
            </button>
            <button class="btn-primary" onclick="app.submitRegistration()">
              Submit Registration
            </button>
          </div>
          <p class="muted" style="margin-top: 8px; font-size: 0.85rem">
            Files are reviewed privately before anything is shown publicly.
          </p>
        </div>
      </div>
    </div>

    <!-- ADMIN VIEW -->
    <div id="view-admin" class="container hidden" style="padding-top: 40px">
      <h1 class="serif">Admin Dashboard</h1>
      <div style="display: flex; gap: 20px; margin-top: 20px">
        <div
          style="
            background: white;
            padding: 20px;
            flex: 1;
            border-radius: 8px;
            border: 1px solid #ddd;
          "
        >
          <h3>Total Vendors</h3>
          <p style="font-size: 2rem; font-weight: bold" id="admin-v-count">0</p>
        </div>
        <div
          style="
            background: white;
            padding: 20px;
            flex: 1;
            border-radius: 8px;
            border: 1px solid #ddd;
          "
        >
          <h3>Total Reviews</h3>
          <p style="font-size: 2rem; font-weight: bold" id="admin-r-count">0</p>
        </div>
      </div>

      <h3 style="margin-top: 40px">Manage Vendors</h3>
      <button
        class="btn-primary"
        style="padding: 5px 15px; font-size: 0.8rem; margin-bottom: 10px"
        onclick="app.openAddVendorModal()"
      >
        + Add New
      </button>
      <table class="admin-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Category</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="admin-v-list"></tbody>
      </table>
    </div>

    <!-- Add Vendor Modal -->
    <div
      id="add-vendor-modal"
      style="
        display: none;
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.4);
        align-items: center;
        justify-content: center;
        z-index: 2000;
      "
    >
      <div
        style="
          background: white;
          width: 460px;
          max-width: 95%;
          padding: 20px;
          border-radius: 8px;
          position: relative;
        "
      >
        <button
          onclick="app.closeAddVendorModal()"
          style="
            position: absolute;
            right: 10px;
            top: 10px;
            border: none;
            background: transparent;
            font-size: 1.2rem;
          "
        >
          ×
        </button>
        <h3 class="serif">Add New Vendor (Prototype)</h3>
        <div style="display: grid; gap: 8px; margin-top: 12px">
          <input id="new-v-name" class="form-input" placeholder="Vendor name" />
          <select id="new-v-type" class="form-select">
            <option>Venue</option>
            <option>Photography</option>
            <option>Catering</option>
            <option>Stylist</option>
            <option>Attire</option>
          </select>
          <input
            id="new-v-location"
            class="form-input"
            placeholder="Location"
          />
          <input
            id="new-v-price"
            class="form-input"
            placeholder="Price (number)"
          />
          <input
            id="new-v-contact"
            class="form-input"
            placeholder="Contact email"
          />
          <input id="new-v-image" class="form-input" placeholder="Image URL" />
          <textarea
            id="new-v-desc"
            class="form-input"
            placeholder="Description"
            rows="3"
          ></textarea>
          <div style="display: flex; gap: 8px; justify-content: flex-end">
            <button class="btn-primary" onclick="app.submitNewVendor()">
              Create
            </button>
            <button class="btn-auth" onclick="app.closeAddVendorModal()">
              Cancel
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Pricing Modal -->
    <div id="pricing-modal">
      <div class="pricing-content">
        <button class="close-modal" onclick="app.closePricingModal()">×</button>
        <div class="pricing-head">
          <div class="pill" style="margin: 0 auto 6px">Choose your plan</div>
          <h2 class="serif" style="margin: 6px 0 4px">Plans for every vendor</h2>
          <p style="color: #666; max-width: 640px; margin: 0 auto">
            Start on Standard for a basic public listing, then upgrade to Premium for boosted visibility and direct contact.
          </p>
        </div>

        <div class="pricing-grid">
          <div class="plan-card">
            <div class="plan-meta">Standard (Free)</div>
            <h4 class="serif">Standard</h4>
            <div class="plan-price">₱0 / mo</div>
            <ul class="plan-features">
              <li>Basic public listing</li>
              <li>Visible profile, limited photo gallery (max 3)</li>
              <li>Internal inquiry form only (no direct contact)</li>
            </ul>
            <button class="btn-secondary" onclick="app.choosePlan('Standard')">
              Stay on Standard
            </button>
          </div>

          <div class="plan-card featured">
            <div class="plan-meta">Premium (Paid)</div>
            <h4 class="serif">Premium</h4>
            <div class="plan-price">₱2,499 / mo</div>
            <ul class="plan-features">
              <li>Boosted sort and enhanced visibility</li>
              <li>Unlimited photos</li>
              <li>Direct contact unlocked (phone, email, website)</li>
              <li>Active social media links</li>
              <li>Deals posting enabled</li>
            </ul>
            <button class="btn-primary" onclick="app.choosePlan('Premium')">
              Choose Premium
            </button>
          </div>
        </div>
      </div>
    </div>

    <script>
      const mockVendors = [
        {
          id: 1,
          name: "Nice Print Photography",
          type: "Photography",
          location: "Quezon City",
          price: 85000,
          rating: 4.8,
          desc: "The Philippines' most sought-after celebrity wedding photographer. Capturing moments that last a lifetime with a cinematic touch.",
          images: [
            "https://images.unsplash.com/photo-1537633552985-df8429e8048b?w=600",
            "https://images.unsplash.com/photo-1511285560982-1351cdeb9821?w=600",
          ],
          contact: "inquiry@niceprint.com",
          map: "https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d30891.31983141765!2d121.060034!3d14.575414!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3397c86ba5e7765d%3A0x75cf2996244ddf5c!2sNice%20Print%20Photography!5e0!3m2!1sen!2sph!4v1764139324982!5m2!1sen!2sph",
        },
        {
          id: 2,
          name: "Juan Carlo The Caterer",
          type: "Catering",
          location: "Batangas / Manila",
          price: 150000,
          rating: 4.9,
          desc: "Experience the taste of luxury. Known for their impeccable service and the famous roast beef station.",
          images: [
            "https://images.unsplash.com/photo-1555244162-803834f70033?w=600",
            "https://images.unsplash.com/photo-1504674900247-1645062cd958?w=600",
          ],
          contact: "info@juancarlo.ph",
          map: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3859.717306885943!2d121.0648817!3d14.671977799999999!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3397b7b1b96dfd45%3A0xaccb0094540ee603!2sJuan%20Carlo%20the%20Caterer!5e0!3m2!1sen!2sph!4v1764139352872!5m2!1sen!2sph",
        },
        {
          id: 3,
          name: "Narra Hill",
          type: "Venue",
          location: "Tagaytay",
          price: 250000,
          rating: 4.7,
          desc: "A stunning pavilion set amidst lush gardens overlooking the Taal Lake. Perfect for intimate and rustic weddings.",
          images: [
            "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1b/17/b4/31/img-20190929-170312-01.jpg?w=900&h=500&s=1",
            "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1b/17/b4/31/img-20190929-170312-01.jpg?w=900&h=500&s=1",
          ],
          contact: "events@narrahill.com",
          map: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3869.996388699278!2d120.88108777509622!3d14.07739038634928!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x33bd9d9ab0ec3cad%3A0x8ef3766ca783045!2sNarra%20Hill!5e0!3m2!1sen!2sph!4v1764139376867!5m2!1sen!2sph",
        },
        {
          id: 4,
          name: "Gideon Hermosa",
          type: "Stylist",
          location: "Makati",
          price: 500000,
          rating: 5.0,
          desc: "Event styling that transforms spaces into magical worlds. The top choice for grand, luxurious setups.",
          images: [
            "https://images.unsplash.com/photo-1527529482837-4698179dc6ce?w=600",
            "https://images.unsplash.com/photo-1522413452208-996ff3f3e740?w=600",
          ],
          contact: "gideon@events.com",
          map: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3834.501866464829!2d120.33251907578385!3d16.03942614023384!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x33915d56d91f0771%3A0x4412384e5abc5cc1!2sThe%20Events%20Studio%20By%20Gideon%20Hermosa!5e0!3m2!1sen!2sph!4v1764139401427!5m2!1sen!2sph",
        },
        {
          id: 5,
          name: "Luna Bridal Couture",
          type: "Attire",
          location: "Taguig",
          price: 250000,
          rating: 4.8,
          desc: "Exquisite handcrafted wedding gowns designed for elegance and timeless beauty.",
          images: [
            "https://thumbs.dreamstime.com/b/store-window-display-wedding-dresses-290002443.jpg",
          ],
          contact: "contact@lunabridal.com",
          map: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3856.59334703639!2d120.97790827576873!3d14.848063870968893!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3397ad846615206b%3A0x71ce09d75de14e76!2sLuna&#39;s%20Bridal%20Shop!5e0!3m2!1sen!2sph!4v1764139422037!5m2!1sen!2sph",
        },
      ];

      // New Mock Data for Fairs
      const mockFairs = [
        {
          id: 1,
          title: "The Philippine Wedding Summit",
          date: "June 22 & 23, 2024",
          venue: "SMX Convention Center Manila",
          image:
            "https://images.unsplash.com/photo-1519225421980-715cb0202128?w=600",
          desc: "The biggest mid-year wedding fair in the country.",
        },
        {
          id: 2,
          title: "Wedding Expo Philippines",
          date: "September 28 & 29, 2024",
          venue: "SMX Convention Center Manila",
          image:
            "https://images.unsplash.com/photo-1465495976277-4387d4b0b4c6?w=600",
          desc: "Asia's Biggest Wedding Fair. 1,000+ Exhibitors.",
        },
        {
          id: 3,
          title: "Bridal Fair at The Fort",
          date: "November 15, 2024",
          venue: "Shangri-La at the Fort",
          image:
            "https://images.unsplash.com/photo-1522673607200-1645062cd958?w=600",
          desc: "An exclusive gathering of premium suppliers for the discerning bride.",
        },
      ];

      let reviews = [
        {
          id: 101,
          vendorId: 1,
          user: "Sarah J.",
          rating: 5,
          text: "Absolutely stunning photos!",
          date: "2023-10-15",
          pros: "Cinematic quality",
          cons: "None",
        },
        {
          id: 102,
          vendorId: 1,
          user: "Mark D.",
          rating: 4,
          text: "Great team, slight delay in delivery.",
          date: "2023-11-02",
          pros: "Friendly staff",
          cons: "Timeline",
        },
        {
          id: 103,
          vendorId: 2,
          user: "Jenny L.",
          rating: 5,
          text: "The food was the highlight!",
          date: "2023-09-20",
          pros: "Roast Beef",
          cons: "None",
        },
      ];

      const app = {
        currentUser: null,

        init: () => {
          app.renderHome(mockVendors);
          app.updateCategoryUI();
          document
            .getElementById("search-type")
            .addEventListener("change", () => {
              app.handleSearch();
              app.updateCategoryUI();
            });
          const searchInput = document.getElementById("search-text");
          searchInput.addEventListener("keydown", (e) => {
            if (e.key === "Enter") {
              e.preventDefault();
              app.handleSearch(true);
            }
          });

          const loginEmail = document.getElementById("login-email");
          const loginPass = document.getElementById("login-pass");
          [loginEmail, loginPass].forEach((el) => {
            el.addEventListener("keydown", (e) => {
              if (e.key === "Enter") {
                e.preventDefault();
                app.login();
              }
            });
          });
        },

        // NAVIGATION
        navigate: (viewId) => {
          document.querySelectorAll(".container").forEach((el) => {
            if (
              el.id !== "view-home" &&
              el.id !== "view-detail" &&
              el.id !== "view-login" &&
              el.id !== "view-register" &&
              el.id !== "view-admin" &&
              el.id !== "view-fairs"
            )
              return;
            el.classList.add("hidden");
          });

          if (viewId === "home") {
            document.getElementById("view-home").classList.remove("hidden");
          } else if (viewId === "fairs") {
            app.renderFairs(); // Render fairs on nav
            document.getElementById("view-fairs").classList.remove("hidden");
          } else if (viewId === "login") {
            document.getElementById("view-login").classList.remove("hidden");
          } else if (viewId === "register") {
            document.getElementById("view-register").classList.remove("hidden");
          } else if (viewId === "admin") {
            if (app.currentUser && app.currentUser.role === "admin") {
              app.renderAdmin();
              document.getElementById("view-admin").classList.remove("hidden");
            } else {
              alert("Access Denied: Admins only.");
              app.navigate("login");
            }
          }
        },

        // FAIRS LOGIC
        renderFairs: () => {
          const container = document.getElementById("fairs-list-container");
          container.innerHTML = mockFairs
            .map(
              (f) => `
                        <div class="v-card">
                            <div class="v-img" style="background-image:url('${f.image}'); height: 200px;"></div>
                            <div class="v-body">
                                <span class="fair-date-badge">${f.date}</span>
                                <h3 class="serif" style="color:var(--brand-brown); margin: 5px 0;">${f.title}</h3>
                                <p style="color:#666; font-size:0.9rem; margin-bottom:10px;"> ${f.venue}</p>
                                <p style="font-size:0.9rem; margin-bottom: 15px;">${f.desc}</p>
                                <button class="btn-primary" style="margin-top:auto; width:100%" onclick="alert('You are pre-registered for ${f.title}! Check your email.')">Pre-Register Free</button>
                            </div>
                        </div>
                    `
            )
            .join("");
        },

        // AUTH SYSTEM
        login: () => {
          const email = document.getElementById("login-email").value;
          if (email && email.includes("admin")) {
            app.currentUser = {
              name: "Admin User",
              role: "admin",
              email: email,
            };
            document.getElementById("nav-admin").style.display = "block";
            app.navigate("admin");
          } else {
            const userName = email ? email.split("@")[0] : "Guest User";
            app.currentUser = {
              name: userName,
              role: "user",
              email: email || "",
            };
            app.navigate("home");
          }

          document.getElementById("auth-section").innerHTML = `
                    <span style="font-weight:bold; margin-right:10px;">Hi, ${app.currentUser.name}</span>
                    <button class="btn-auth" onclick="app.logout()">Logout</button>
                `;
        },

        logout: () => {
          app.currentUser = null;
          document.getElementById("nav-admin").style.display = "none";
          document.getElementById(
            "auth-section"
          ).innerHTML = `<button class="btn-auth" onclick="app.navigate('login')">Sign In / Register</button>`;
          app.navigate("home");
        },

        // REGISTRATION & PRICING
        openPricingModal: () => {
          const modal = document.getElementById("pricing-modal");
          if (modal) modal.style.display = "flex";
        },
        closePricingModal: () => {
          const modal = document.getElementById("pricing-modal");
          if (modal) modal.style.display = "none";
        },
        choosePlan: (plan) => {
          alert(`You selected the ${plan} plan. A representative will follow up.`);
          app.closePricingModal();
        },
        submitRegistration: () => {
          const requiredFields = [
            "reg-business-name",
            "reg-business-email",
            "reg-description",
            "reg-rate",
            "reg-map",
            "reg-faqs",
            "reg-permit",
            "reg-dti",
            "reg-sec",
          ];

          const missing = requiredFields.filter((id) => {
            const el = document.getElementById(id);
            if (!el) return true;
            if (el.type === "file") {
              return !(el.files && el.files.length);
            }
            return !el.value || el.value.trim() === "";
          });

          if (missing.length > 0) {
            alert("Please complete all required fields and uploads before submitting.");
            return;
          }

          const payload = {
            business: document.getElementById("reg-business-name").value,
            email: document.getElementById("reg-business-email").value,
            phone: document.getElementById("reg-business-phone").value,
            description: document.getElementById("reg-description").value,
            rate: document.getElementById("reg-rate").value,
            faqs: document.getElementById("reg-faqs").value,
            map: document.getElementById("reg-map").value,
            marketplace: document.getElementById("reg-marketplace").value,
            premiumEntries: document.getElementById("reg-premium-entries").value,
          };

          console.log("Registration submitted (prototype):", payload);
          alert(
            "Registration submitted! Our team will review your details and reach out within 1-2 business days."
          );
          app.openPricingModal();
        },

        // HOME & SEARCH
        renderHome: (list) => {
          const container = document.getElementById("vendor-list-container");
          const countLabel = document.getElementById("vendor-count");

          if (!list || list.length === 0) {
            container.innerHTML = `<div style="padding:40px; text-align:center; color:#666; grid-column: 1 / -1;">No vendors found for this category.</div>`;
            if (countLabel) countLabel.innerText = "(0)";
            return;
          }

          if (countLabel) countLabel.innerText = `(${list.length})`;

          container.innerHTML = list
            .map(
              (v) => `
                    <div class="v-card" onclick="app.showVendorDetail(${v.id})">
                        <div class="v-img" style="background-image:url('${
                          v.images[0]
                        }'); position:relative;">
                            <span class="v-score">${v.rating}</span>
                        </div>
                        <div class="v-body">
                            <small style="color:#888; text-transform:uppercase; font-size:0.7rem;">${
                              v.type
                            } • ${v.location}</small>
                            <h3 class="serif" style="color:var(--brand-brown); margin: 5px 0;">${
                              v.name
                            }</h3>
                            <p style="font-size:0.9rem; color:#555; overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical;">${
                              v.desc
                            }</p>
                            <div style="margin-top:auto; padding-top:15px; font-weight:bold;">
                                Starts at ₱${v.price.toLocaleString()}
                            </div>
                        </div>
                    </div>
                `
            )
            .join("");
        },

        handleSearch: (clearAfter = false) => {
          const txt = document
            .getElementById("search-text")
            .value.toLowerCase();
          const type = document.getElementById("search-type").value;
          const sort = document.getElementById("search-sort").value;

          let filtered = mockVendors.filter((v) => {
            return (
              v.name.toLowerCase().includes(txt) &&
              (type === "" || v.type === type)
            );
          });

          if (sort === "price_low") filtered.sort((a, b) => a.price - b.price);
          if (sort === "price_high") filtered.sort((a, b) => b.price - a.price);
          if (sort === "rating") filtered.sort((a, b) => b.rating - a.rating);

          app.renderHome(filtered);
          if (app.updateCategoryUI) app.updateCategoryUI();

          if (clearAfter) {
            document.getElementById("search-text").value = "";
            document.getElementById("search-type").value = "";
            if (app.updateCategoryUI) app.updateCategoryUI();
          }
        },

        filterByCat: (cat) => {
          const select = document.getElementById("search-type");
          const current = select.value;
          if (current === cat) {
            select.value = "";
          } else {
            select.value = cat;
          }
          app.handleSearch();
        },

        updateCategoryUI: () => {
          const selected = document.getElementById("search-type").value;
          document.querySelectorAll(".cat-card").forEach((el) => {
            const cat = el.getAttribute("data-cat") || "";
            if (cat === selected && selected !== "") {
              el.classList.add("selected");
            } else {
              el.classList.remove("selected");
            }
          });
        },

        /* Add vendor modal controls */
        openAddVendorModal: () => {
          document.getElementById("add-vendor-modal").style.display = "flex";
        },
        closeAddVendorModal: () => {
          document.getElementById("add-vendor-modal").style.display = "none";
        },
        submitNewVendor: () => {
          const name =
            document.getElementById("new-v-name").value || "New Vendor";
          const type = document.getElementById("new-v-type").value || "Venue";
          const location =
            document.getElementById("new-v-location").value || "";
          const price = parseInt(
            document.getElementById("new-v-price").value || "0"
          );
          const rating = 0;
          const contact = document.getElementById("new-v-contact").value || "";
          const image = document.getElementById("new-v-image").value || "";
          const desc = document.getElementById("new-v-desc").value || "";

          const newId = mockVendors.reduce((m, v) => Math.max(m, v.id), 0) + 1;
          mockVendors.push({
            id: newId,
            name: name,
            type: type,
            location: location,
            price: price,
            rating: rating,
            desc: desc,
            images: image
              ? [image]
              : ["https://via.placeholder.com/600x400?text=Vendor"],
            contact: contact,
            map: "",
          });

          alert("Vendor added (prototype).");
          app.closeAddVendorModal();
          app.renderAdmin();
          app.renderHome(mockVendors);
        },

        // VENDOR DETAILS & BOOKING
        showVendorDetail: (id) => {
          const v = mockVendors.find((x) => x.id === id);
          const vReviews = reviews.filter((r) => r.vendorId === id);

          document.getElementById("view-home").classList.add("hidden");
          document.getElementById("view-detail").classList.remove("hidden");

          const content = document.getElementById("detail-content");

          // Function to generate stars string
          const getStars = (r) => {
            return "★".repeat(Math.round(r)) + "☆".repeat(5 - Math.round(r));
          };

          content.innerHTML = `
                    <div class="detail-header">
                        <h1 class="serif">${v.name}</h1>
                        <p>📍 ${v.location} &nbsp;|&nbsp; ⭐ ${v.rating} (${
            vReviews.length
          } Reviews)</p>
                    </div>

                    <div class="detail-gallery">
                        <div class="gal-main" style="background-image:url('${
                          v.images[0]
                        }')"></div>
                        <div class="gal-sub">
                            <div class="gal-item" style="background-image:url('${
                              v.images[1] || v.images[0]
                            }')"></div>
                            <div class="gal-item" style="background-image:url('${
                              v.images[0]
                            }')"></div>
                        </div>
                    </div>

                    <div class="detail-layout">
                        <div>
                            <h3 class="serif">About this vendor</h3>
                            <p style="margin-bottom:20px;">${v.desc}</p>
                            
                            <h3 class="serif">Location</h3>
                            <div style="background:#eee; height:200px; display:flex; align-items:center; justify-content:center; margin-bottom:30px;">
                                ${
                                  v.map
                                    ? `<iframe src="${v.map}" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy"></iframe>`
                                    : "Map Unavailable in Demo"
                                }
                            </div>

                            <div class="review-box">
                                <div style="display:flex; justify-content:space-between; align-items:center;">
                                    <h3 class="serif">Reviews</h3>
                                    <button class="btn-primary" onclick="app.toggleReviewForm()" style="font-size:0.8rem;">Write a Review</button>
                                </div>
                                
                                <div id="review-form-container" class="hidden" style="margin-top:20px; background:#f9f9f9; padding:15px;">
                                    ${
                                      app.currentUser
                                        ? `
                                        <strong>Posting as ${app.currentUser.name}</strong>
                                        <select id="new-rating" class="form-select" style="margin:10px 0;"><option value="5">5 - Excellent</option><option value="4">4 - Very Good</option><option value="3">3 - Good</option></select>
                                        <textarea id="new-review-text" class="form-input" placeholder="Share your experience..."></textarea>
                                        <button class="btn-primary" style="margin-top:10px;" onclick="app.submitReview(${v.id})">Submit Review</button>
                                    `
                                        : `<p><a onclick="app.navigate('login')" style="color:blue; cursor:pointer;">Log in</a> to write a review.</p>`
                                    }
                                </div>

                                <div id="reviews-list" style="margin-top:20px;">
                                    ${
                                      vReviews.length === 0
                                        ? "<p>No reviews yet.</p>"
                                        : vReviews
                                            .map((r) => {
                                              const initial = r.user
                                                .charAt(0)
                                                .toUpperCase();
                                              return `
                                        <div class="r-item">
                                            <div class="r-item-flex">
                                                <div class="r-avatar-circle">${initial}</div>
                                                <div class="r-content">
                                                    <div class="r-user-name">${
                                                      r.user
                                                    }</div>
                                                    <div class="r-stars">${getStars(
                                                      r.rating
                                                    )}</div>
                                                    <p class="r-text">"${
                                                      r.text
                                                    }"</p>
                                                    <small class="r-date">${
                                                      r.date
                                                    }</small>
                                                    ${
                                                      app.currentUser &&
                                                      app.currentUser.name ===
                                                        r.user
                                                        ? `<button style="font-size:0.7rem; color:red; border:none; background:none; text-decoration:underline; margin-top:5px;" onclick="app.deleteReview(${r.id}, ${v.id})">Delete</button>`
                                                        : ""
                                                    }
                                                </div>
                                                <div class="r-numeric-score">★ ${
                                                  r.rating
                                                }.0</div>
                                            </div>
                                        </div>
                                    `;
                                            })
                                            .join("")
                                    }
                                </div>
                            </div>
                        </div>

                        <div>
                            <div class="booking-card">
                                <h3 class="serif" style="margin-bottom:15px;">Book ${
                                  v.name
                                }</h3>
                                <div style="font-size:1.5rem; font-weight:bold; color:var(--brand-brown); margin-bottom:20px;">₱${v.price.toLocaleString()} <span style="font-size:0.9rem; color:#666; font-weight:normal;">starting price</span></div>
                                
                                <label style="font-size:0.8rem; font-weight:bold;">Wedding Date</label>
                                <input type="date" class="form-input" style="margin-bottom:15px;">
                                
                                <label style="font-size:0.8rem; font-weight:bold;">Message</label>
                                <textarea class="form-input" rows="3" placeholder="I'm interested in..." style="margin-bottom:15px;"></textarea>

                                <button class="btn-primary" style="width:100%" onclick="alert('Booking Inquiry Sent! The vendor will contact you at ' + (app.currentUser ? app.currentUser.email : 'your email address') + '.')">Check Availability</button>
                                <p style="font-size:0.8rem; color:#666; text-align:center; margin-top:10px;">You won't be charged yet</p>
                            </div>
                        </div>
                    </div>
                `;
        },

        // REVIEW LOGIC
        toggleReviewForm: () => {
          document
            .getElementById("review-form-container")
            .classList.toggle("hidden");
        },

        submitReview: (vendorId) => {
          const text = document.getElementById("new-review-text").value;
          const rating = document.getElementById("new-rating").value;

          reviews.push({
            id: Date.now(),
            vendorId: vendorId,
            user: app.currentUser.name,
            rating: parseInt(rating),
            text: text,
            date: new Date().toISOString().split("T")[0],
            pros: "New Experience",
            cons: "None",
          });

          alert("Review Submitted!");
          app.showVendorDetail(vendorId); // Refresh
        },

        deleteReview: (reviewId, vendorId) => {
          if (confirm("Are you sure?")) {
            reviews = reviews.filter((r) => r.id !== reviewId);
            app.showVendorDetail(vendorId);
          }
        },

        // ADMIN LOGIC
        renderAdmin: () => {
          document.getElementById("admin-v-count").innerText =
            mockVendors.length;
          document.getElementById("admin-r-count").innerText = reviews.length;

          const tbody = document.getElementById("admin-v-list");
          tbody.innerHTML = mockVendors
            .map(
              (v) => `
                    <tr>
                        <td>${v.id}</td>
                        <td>${v.name}</td>
                        <td>${v.type}</td>
                        <td>
                            <button class="action-btn btn-edit" onclick="alert('Edit Modal')">Edit</button>
                            <button class="action-btn btn-del" onclick="app.adminDeleteVendor(${v.id})">Delete</button>
                        </td>
                    </tr>
                `
            )
            .join("");
        },

        adminDeleteVendor: (id) => {
          if (confirm("Delete this vendor listing?")) {
            const idx = mockVendors.findIndex((v) => v.id === id);
            if (idx > -1) mockVendors.splice(idx, 1);
            app.renderAdmin();
          }
        },
      };

      // Initialize App
      app.init();
    </script>
  </body>
</html>